<head>
    <title>Pomodimer</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name=viewport content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height">
    
    <script type="text/javascript" src="cordova.js"></script>
    
    <script src="js/phonon.min.js"></script>
    <link rel="stylesheet" href="css/phonon.min.css">
    
    <!--<script src="js/progressbar.min.js"></script>-->
    
    <!--<script src="js/touch.js"></script>-->
    
    <script type="text/javascript" src="js/Logger.js"></script>
    
    <script src="js/ProgressCircle.min.js"></script>
    
    <script src="js/knockout-3.3.0.min.js"></script>
    
    <!--<link rel="stylesheet" href="css/circle.css">-->
    
    <link rel="stylesheet" href="css/fix.css">
</head>
<body id="body">
    
    
    
   
    
    
    
    
    
    
    
    <timer data-page="true">
        <link rel="stylesheet" href="css/timer.css">
        
        <header class="header-bar">
            <div class="pull-left">
                <h1 class="title">Pomodimer</h1>
            </div>
            <a class="btn pull-right icon icon-settings" data-popover-id="pop-settings"></a>
        </header>
        
        <nav class="tabs header-tabs">
            <div class="tab-items">
                <a class="tab-item">Список дел</a>
                <a class="tab-item">Таймер</a>
                <!--<a class="tab-item"><i class="icon icon-settings"></i></a>-->
            </div>
            <div class="tab-indicator"></div>
        </nav>
        
        <div class="content" data-tab-contents="true" data-disable-swipe="false">
            
            <div class="popover" id="pop-settings" data-status="closed">
                <ul class="list">
                    <li><a class="padded-list js-stop-timer">Остановить таймер</a></li>
                </ul>
            </div>
            
            
            
            
            <div class="tab-content" id="tab-tasklist">
                <ul class="list" id="task-list" data-bind="foreach: tasks">
                    <li class="padded-list">
                        <a class="js-startTimer" onclick="Timer().startTimer();">
                            <span class="pull-right" data-bind="text: tomatos"></span>
                            <span class="" data-bind="text: name"></span>
                        </a>
                    </li>
                </ul>
                <ul class="list">
                    <li class="padded-list" id="add-task">
                        <a data-panel-id="addTaskPanel">
                            <span class="icon icon-add pull-left"></span>
                            <span>Добавить новую задачу</span>
                        </a>
                    </li>
                </ul>
            </div>
            
            
            
            
            <div class="tab-content" id="tab-timer">
                <h3 id="current-task-name" class="text-center" data-bind="text: currentTask"></h3>
                
                <!--<div id="timer">-->
                <!--    <div class="c100 p0">-->
                <!--        <span>25%</span>-->
                <!--        <div class="slice">-->
                <!--            <div class="bar"></div>-->
                <!--            <div class="fill"></div>-->
                <!--        </div>-->
                <!--    </div>-->
                <!--</div>-->
                
                <canvas id="timer" width="180" height="180"></canvas>
                
                <!--<div>Icons made by <a href="http://www.freepik.com" title="Freepik">Freepik</a> from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a>             is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0">CC BY 3.0</a></div>-->
            </div>
        </div>
        

        
        
        
        <script>
            //phonon.notif('Я готов!', 3000, false);
            
            
            
            
            //var stopTimerElems = document.querySelector('.js-stop-timer');
            //for ( var i=0; i <= stopTimerElems.length; i++ ) {
            //    stopTimerElems[i].on('tap', function() {
            //        window.plugins.insomnia.allowSleepAgain();  // разрешить гашение экрана
            //        clearInterval( window.timerInterval );
            //    });
            //};
            
            
            //document.querySelector('[data-popover-id]').on('tap', function() {
            //    var id = this['data-popover-id']
            //    if ( this['data-status'] === 'closed' ) {
            //        phono.popover('#my-popover').open();
            //    }
            //})
            
            
            
            
            
            
            
            
            function pad(n, width, z) {
                z = z || '0';
                n = n + '';
                
                if ( n.length === width ) {
                    n = n;
                } else if ( n.length < width ) {
                    n = new Array(width - n.length + 1).join(z) + n;
                }/* else {
                    n = n.substring(0, width);
                }*/
                
                return n;
            }
        </script>
        
        <div id="addTaskPanel" class="panel">
                <header class="header-bar">
                    <a class="btn icon icon-close pull-right" href="#" data-panel-close="true"></a>
                    <h1 class="title">Добавить задачу</h1>
                </header>
        
                <div class="content">
                    <p class="padded-full">
                        <input type="text" placeholder="Название задачи" />
                    </p>
                    <p class="padded-full text-right">
                        <a class="btn primary" id="addTaskConfirm" data-bind="click: addTask">Добавить</a>
                    </p>
                </div>
        </div>
    </timer>
    
    
    
    
    
    
    
    <script>
        phonon.options({
            navigator: {
                defaultPage: 'timer',
                hashPrefix: '!',
                animatePages: true,
                enableBrowserBackButton: false,
                templateRootDirectory: '',
                useHash: false,
            },
            i18n: null,
        })
        
        phonon.navigator().start();
        
        //window.body = document.getElementById('body');
        //ontouch(window.body, function(evt, dir, phase, swipetype, distance){
        //    var n = phonon.navigator();
        //    
        //    if ( phase == 'move' && dir == 'right' ) {
        //        if ( n.currentPage === 'timer' ) {
        //            n.changePage('tasklist');
        //        }
        //    } else
        //    
        //    if ( phase == 'move' && dir == 'left' ) {
        //        if ( n.currentPage === 'tasklist' ) {
        //            n.changePage('timer');
        //        }
        //    }
        //});
        
        Logger.show();
        
        // Заглушка
        window.plugins = window.plugins
                        || {
                            'insomnia': {
                                keepAwake: function(){},
                                allowSleepAgain: function(){}
                            }
                        };
    </script>
    
    <script src="js/main.js"></script>
</body>